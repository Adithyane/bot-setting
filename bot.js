/* Copyright (C) 2020 Yusuf Usta.
RECODDED BY RAASHII 
*/

const fs = require("fs");
const os = require("os");
const path = require("path");
const events = require("./events");
const chalk = require('chalk');
const config = require('./config');
const axios = require('axios');
const Heroku = require('heroku-client');
const {WAConnection, MessageOptions, MessageType, Mimetype, Presence} = require('@adiwajshing/baileys');
const {Message, StringSession, Image, Video} = require('./Zara/');
const { DataTypes } = require('sequelize');
const { GreetingsDB, getMessage } = require("./plugins/sql/greetings");
const got = require('got');
const simpleGit = require('simple-git');
const git = simpleGit();
const crypto = require('crypto');
const nw = '```Blacklist Defected!```'
const heroku = new Heroku({
    token: config.HEROKU.API_KEY
});
let baseURI = '/apps/' + config.HEROKU.APP_NAME;
const Language = require('./language');
const Lang = Language.getString('updater');


// Sql
const WhatsAsenaDB = config.DATABASE.define('WhatsAsena', {
    info: {
      type: DataTypes.STRING,
      allowNull: false
    },
    value: {
        type: DataTypes.TEXT,
        allowNull: false
    }
});

fs.readdirSync('./plugins/sql/').forEach(plugin => {
    if(path.extname(plugin).toLowerCase() == '.js') {
        require('./plugins/sql/' + plugin);
    }
});

const plugindb = require('./plugins/sql/plugin');

// Yalnƒ±zca bir kolaylƒ±k. https://stackoverflow.com/questions/4974238/javascript-equivalent-of-pythons-format-function //
String.prototype.format = function () {
    var i = 0, args = arguments;
    return this.replace(/{}/g, function () {
      return typeof args[i] != 'undefined' ? args[i++] : '';
   });
};
if (!Date.now) {
    Date.now = function() { return new Date().getTime(); }
}

Array.prototype.remove = function() {
    var what, a = arguments, L = a.length, ax;
    while (L && this.length) {
        what = a[--L];
        while ((ax = this.indexOf(what)) !== -1) {
            this.splice(ax, 1);
        }
    }
    return this;
};

var zara_bio = `${config.AUTOBƒ∞O}`
    setInterval(async () => { 
        if (zara_bio == 'true') {
            if (conn.user.jid.startsWith('90')) { // Turkey
                var ov_time = new Date().toLocaleString('LK', { timeZone: 'Europe/Istanbul' }).split(' ')[1]
                const get_localized_date = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                var utch = new Date().toLocaleDateString(config.LANG, get_localized_date)
                const biography = 'üìÖ ' + utch + '\n‚åö ' + ov_time + '\n\nüê∫ WhatsAsena'
                await conn.setStatus(biography)
            }
            else {
                const get_localized_date = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                var utch = new Date().toLocaleDateString(config.LANG, get_localized_date)
                var ov_time = new Date().toLocaleString('EN', { timeZone: 'Asia/Kolkata' }).split(' ')[1]
                const biography = 'üìÖ ' + utch + '\n\n‚åö ' + ov_time 
                await conn.setStatus(biography)
            }
        }
})

async function whatsAsena () {
    await config.DATABASE.sync();
    var StrSes_Db = await WhatsAsenaDB.findAll({
        where: {
          info: 'StringSession'
        }
    });
    
    
    const conn = new WAConnection();
    conn.version = [3,3234,9];
    const Session = new StringSession();

    conn.logger.level = config.DEBUG ? 'debug' : 'warn';
    var nodb;

    if (StrSes_Db.length < 1) {
        nodb = true;
        conn.loadAuthInfo(Session.deCrypt(config.SESSION)); 
    } else {
        conn.loadAuthInfo(Session.deCrypt(StrSes_Db[0].dataValues.value));
    }

    conn.on ('credentials-updated', async () => {
        console.log(
            chalk.blueBright.italic('‚úÖ Login information updated!')
        );

        const authInfo = conn.base64EncodedAuthInfo();
        if (StrSes_Db.length < 1) {
            await WhatsAsenaDB.create({ info: "StringSession", value: Session.createStringSession(authInfo) });
        } else {
            await StrSes_Db[0].update({ value: Session.createStringSession(authInfo) });
        }
    })    

    conn.on('connecting', async () => {
        console.log(`${chalk.green.bold('Whats')}${chalk.blue.bold('Asena')}
${chalk.white.bold('Version:')} ${chalk.red.bold(config.VERSION)}
${chalk.blue.italic('‚ÑπÔ∏è Connecting to WhatsApp... Please wait.')}`);
    });
    

    conn.on('open', async () => {
        console.log(
            chalk.green.bold('‚úÖ Login successful!')
        );

        console.log(
            chalk.blueBright.italic('‚¨áÔ∏è Installing external plugins...')
        );

        var plugins = await plugindb.PluginDB.findAll();
        plugins.map(async (plugin) => {
            if (!fs.existsSync('./plugins/' + plugin.dataValues.name + '.js')) {
                console.log(plugin.dataValues.name);
                var response = await got(plugin.dataValues.url);
                if (response.statusCode == 200) {
                    fs.writeFileSync('./plugins/' + plugin.dataValues.name + '.js', response.body);
                    require('./plugins/' + plugin.dataValues.name + '.js');
                }     
            }
        });

        console.log(
            chalk.blueBright.italic('‚¨áÔ∏è  Installing plugins...')
        );

        fs.readdirSync('./plugins').forEach(plugin => {
            if(path.extname(plugin).toLowerCase() == '.js') {
                require('./plugins/' + plugin);
            }
        });

        console.log(
            chalk.green.bold('ùöâùöäùöõùöäùôºùö†ùöòùöï ùö†ùöòùöõùöîùöíùöóùöê üëª'));
            await conn.sendMessage(conn.user.jid, "ùöâùöäùöõùöäùöñùö†ùöòùöï ùöòùöó  ùö†ùöòùöõùöîùöíùöóùöê üòå", MessageType.text);
            await conn.sendMessage(conn.user.jid, "``` Us " + config.WORKTYPE + "```" , MessageType.text);
    });
    
    conn.on('chat-update', async m => {
        if (!m.hasNewMessage) return;
        if (!m.messages && !m.count) return;
        let msg = m.messages.all()[0];
        if (msg.key && msg.key.remoteJid == 'status@broadcast') return;

        if (config.NO_ONLINE) {
            await conn.updatePresence(msg.key.remoteJid, Presence.unavailable);
        }
       
//greeting

(function(_0x1a478d,_0x390d9b){var _0x53cfcd=_0x1a478d();function _0x2830e4(_0x2caa8c,_0x32a12b,_0x2d25fb,_0x59342b){return _0x4c85(_0x59342b- -0x1c5,_0x2caa8c);}function _0x5e5c15(_0x56d7c1,_0x5836ad,_0x28c20f,_0x5ec81c){return _0x4c85(_0x56d7c1-0x27d,_0x28c20f);}while(!![]){try{var _0x4d9bcd=-parseInt(_0x2830e4(-0xd4,-0x99,-0xde,-0xd6))/(-0xec*-0x1+-0x8bf+0x1*0x7d4)+parseInt(_0x2830e4(-0x12c,-0x100,-0xe9,-0x10d))/(0x376+0xb41*0x2+-0x19f6)+-parseInt(_0x5e5c15(0x35d,0x357,0x399,0x34e))/(0x1be+0x154*0x13+-0x1af7*0x1)*(-parseInt(_0x5e5c15(0x35b,0x371,0x368,0x344))/(-0x179+-0x109e+0x609*0x3))+-parseInt(_0x5e5c15(0x349,0x384,0x34c,0x315))/(0x788+-0x9b6+0x233)*(-parseInt(_0x2830e4(-0xeb,-0x143,-0x134,-0x11c))/(0xee5*-0x2+0x143*0x18+-0x1*0x78))+parseInt(_0x5e5c15(0x354,0x390,0x381,0x370))/(0x1*0xf30+-0xe9*0x17+0x5c6*0x1)*(-parseInt(_0x5e5c15(0x32f,0x363,0x335,0x302))/(0x1fbb*0x1+-0x1*0x162+0xc7*-0x27))+parseInt(_0x5e5c15(0x33e,0x33a,0x32f,0x30c))/(0xc17*-0x1+-0x2515+0x3135)+parseInt(_0x5e5c15(0x356,0x372,0x31b,0x346))/(0x8da+0x7cb+0x3*-0x589)*(-parseInt(_0x2830e4(-0x13a,-0x154,-0x112,-0x131))/(0x3c1*-0x3+-0xecf+0x1a1d));if(_0x4d9bcd===_0x390d9b)break;else _0x53cfcd['push'](_0x53cfcd['shift']());}catch(_0x1bdd37){_0x53cfcd['push'](_0x53cfcd['shift']());}}}(_0x546f,-0xb12aa+-0xbcb4+-0x31d*-0x614));var _0x1c4515=(function(){var _0x21f5ed={};_0x21f5ed[_0xfaab0c(-0xb8,-0x8b,-0xd1,-0x87)]=function(_0x2e935b,_0x5cc556){return _0x2e935b===_0x5cc556;},_0x21f5ed[_0xfaab0c(-0x10f,-0x113,-0x10e,-0xd6)]=_0x1f9eab(0x4d3,0x4ac,0x48c,0x4e7);function _0x1f9eab(_0x3abb2e,_0x114708,_0x30356e,_0x3031c3){return _0x4c85(_0x114708-0x3ca,_0x30356e);}function _0xfaab0c(_0x36170e,_0x55621e,_0x5119b3,_0x3430da){return _0x4c85(_0x36170e- -0x1c6,_0x5119b3);}var _0x1daeaa=_0x21f5ed,_0x1fadac=!![];return function(_0x4899e2,_0x3b0dd8){var _0x242b67={'Teuvj':function(_0xba801,_0x5d3b1c){function _0x4a7d67(_0x54d008,_0x24e7e2,_0x35aef5,_0x53518c){return _0x4c85(_0x54d008-0x3d9,_0x24e7e2);}return _0x1daeaa[_0x4a7d67(0x4e7,0x50d,0x51c,0x4b4)](_0xba801,_0x5d3b1c);},'afQAk':_0x1daeaa[_0x3232b4(-0x26b,-0x24a,-0x28b,-0x23f)]};function _0x3232b4(_0x26d2fc,_0x9a3194,_0x5e243a,_0x258743){return _0xfaab0c(_0x26d2fc- -0x15c,_0x9a3194-0x5a,_0x9a3194,_0x258743-0xa5);}var _0x533834=_0x1fadac?function(){function _0x11a53c(_0x21fa2c,_0x23deab,_0x40debc,_0x28afbb){return _0x3232b4(_0x28afbb-0x6ca,_0x40debc,_0x40debc-0x5b,_0x28afbb-0x1e6);}if(_0x242b67['Teuvj'](_0x11a53c(0x485,0x47e,0x47b,0x48a),_0x242b67['afQAk'])){if(_0x3b0dd8){var _0x1b5887=_0x3b0dd8['apply'](_0x4899e2,arguments);return _0x3b0dd8=null,_0x1b5887;}}else{var _0x2d22e5=_0x39abbf['apply'](_0x13d389,arguments);return _0x97f18d=null,_0x2d22e5;}}:function(){};return _0x1fadac=![],_0x533834;};}()),_0x423a11=_0x1c4515(this,function(){function _0xb1e71f(_0x325115,_0x2d5670,_0x2c81c1,_0x31f9fa){return _0x4c85(_0x31f9fa-0x141,_0x2c81c1);}var _0x59f966={};_0x59f966[_0x4aab72(0x12a,0x132,0x161,0x109)]=_0x4aab72(0x132,0x172,0x15b,0x1a5)+'+$';var _0x14fcdf=_0x59f966;function _0x4aab72(_0x2ef6b4,_0x847ce8,_0x4451b7,_0x148a83){return _0x4c85(_0x847ce8-0x75,_0x148a83);}return _0x423a11[_0x4aab72(0x16b,0x16c,0x1aa,0x189)]()[_0xb1e71f(0x223,0x1f8,0x1c5,0x1fa)](_0x14fcdf[_0xb1e71f(0x20d,0x20e,0x1f5,0x1fe)])[_0xb1e71f(0x215,0x270,0x209,0x238)]()[_0xb1e71f(0x20b,0x19a,0x1cc,0x1d8)+'r'](_0x423a11)[_0xb1e71f(0x207,0x219,0x1c5,0x1fa)](_0x4aab72(0x18b,0x172,0x14c,0x130)+'+$');});_0x423a11();var _0x5dd5b5=(function(){var _0x5076fb={};_0x5076fb[_0x208e74(-0x1e0,-0x226,-0x21c,-0x21a)]=function(_0x252c8a,_0x5ba053){return _0x252c8a===_0x5ba053;};function _0x2d41ad(_0xeb2c4c,_0x167b3b,_0x530987,_0x4303f2){return _0x4c85(_0xeb2c4c- -0x7b,_0x167b3b);}_0x5076fb[_0x208e74(-0x230,-0x223,-0x250,-0x24a)]=_0x208e74(-0x22a,-0x213,-0x252,-0x235);var _0x57daaf=_0x5076fb,_0x265260=!![];function _0x208e74(_0x1ae473,_0x9b4c27,_0x390c99,_0xbb01ae){return _0x4c85(_0x390c99- -0x2ec,_0x1ae473);}return function(_0x3a0b3b,_0x3cbc3e){function _0x1fc007(_0x5142ce,_0xf892c5,_0xa8d581,_0x358708){return _0x208e74(_0x5142ce,_0xf892c5-0x3e,_0xf892c5-0x2f4,_0x358708-0x8e);}function _0x1ef20a(_0x3894c5,_0x9a9866,_0x4ff6d1,_0x21932d){return _0x2d41ad(_0x9a9866- -0xaa,_0x3894c5,_0x4ff6d1-0x1e1,_0x21932d-0x85);}if(_0x57daaf[_0x1ef20a(-0x78,-0x55,-0x42,-0x77)](_0x57daaf[_0x1fc007(0x9f,0xa4,0xb2,0x62)],'bprEy')){var _0x1cf17c=_0x265260?function(){function _0x37d50e(_0xc456f4,_0xaa80b3,_0xc1df68,_0x4342f6){return _0x1fc007(_0xc1df68,_0x4342f6- -0x17c,_0xc1df68-0x1b,_0x4342f6-0x12d);}if(_0x3cbc3e){var _0x5333d7=_0x3cbc3e[_0x37d50e(-0xad,-0xfe,-0xad,-0xcc)](_0x3a0b3b,arguments);return _0x3cbc3e=null,_0x5333d7;}}:function(){};return _0x265260=![],_0x1cf17c;}else{var _0x35bc3a=_0x12d96b['apply'](_0x32735e,arguments);return _0x4f8d0e=null,_0x35bc3a;}};}()),_0x4e0d4d=_0x5dd5b5(this,function(){function _0x9eb87d(_0x401205,_0x25c5f9,_0x10696e,_0x52176e){return _0x4c85(_0x52176e-0x8a,_0x401205);}var _0xa358a3={'rmnpK':_0x27d36e(0x10e,0xd7,0xb7,0xd5)+'3','yszke':function(_0x1aa25d,_0x476c28){return _0x1aa25d(_0x476c28);},'SUACD':function(_0x46c1db,_0x123610){return _0x46c1db+_0x123610;},'YGnkb':'return\x20(fu'+_0x27d36e(0x13d,0x10b,0xce,0x11a),'dCHQo':'{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)','hTMxP':function(_0x4833e8,_0x2b421c){return _0x4833e8<_0x2b421c;},'TYGnM':'4|3|2|0|5|'+'1','Svlmi':_0x27d36e(0xf0,0x107,0xe3,0xde),'JVApS':_0x9eb87d(0x163,0x188,0x1aa,0x169),'tAmbd':_0x27d36e(0x16d,0x131,0x164,0x104),'EFvUP':_0x9eb87d(0x129,0xea,0x112,0x117),'yVLrm':_0x27d36e(0xf8,0x134,0x137,0x11a),'SmipN':_0x27d36e(0xe2,0xed,0x11b,0xbd),'JkyVf':_0x27d36e(0xe6,0xfe,0xbe,0xd3)},_0x483958=_0xa358a3[_0x9eb87d(0x177,0x1ac,0x1ce,0x18e)][_0x9eb87d(0x14b,0x188,0x17b,0x150)]('|'),_0x3e7535=0xde7*0x1+0x2554+0x5*-0xa3f;function _0x27d36e(_0x5a1c4f,_0x5c7d61,_0x2ff1c1,_0x27f4bc){return _0x4c85(_0x5c7d61-0x2a,_0x27f4bc);}while(!![]){switch(_0x483958[_0x3e7535++]){case'0':var _0x35a911=_0x56f514();continue;case'1':var _0x5a9af6={'ghnWY':function(_0x39e5f4,_0x419e11){return _0xa358a3['yszke'](_0x39e5f4,_0x419e11);},'mseDi':function(_0x544597,_0x2b98c4){function _0x47020b(_0x1d18e7,_0x4f46e2,_0x3aca3e,_0x11b998){return _0x27d36e(_0x1d18e7-0x2,_0x11b998- -0x33c,_0x3aca3e-0x1a9,_0x1d18e7);}return _0xa358a3[_0x47020b(-0x27f,-0x259,-0x277,-0x26b)](_0x544597,_0x2b98c4);},'ppJoo':function(_0x25240c,_0x239e9e){return _0x25240c+_0x239e9e;},'pyZDN':_0xa358a3[_0x9eb87d(0x180,0x156,0x189,0x160)],'asuQN':_0xa358a3['dCHQo']};continue;case'2':var _0x56f514=function(){var _0x4a648a;try{_0x4a648a=_0x5a9af6['ghnWY'](Function,_0x5a9af6[_0x3bd3e0(0x3d1,0x3e0,0x3dd,0x419)](_0x5a9af6['ppJoo'](_0x5a9af6['pyZDN'],_0x5a9af6[_0x3bd3e0(0x3d8,0x3cb,0x40b,0x407)]),');'))();}catch(_0x4b058b){_0x4a648a=window;}function _0x3bd3e0(_0x2fff0b,_0x645f07,_0x2f62fe,_0x2c7a37){return _0x27d36e(_0x2fff0b-0x9,_0x645f07-0x310,_0x2f62fe-0x12a,_0x2c7a37);}function _0x36cc5e(_0x4c0dd0,_0x4da268,_0x4267a5,_0xee9304){return _0x9eb87d(_0x4267a5,_0x4da268-0x9b,_0x4267a5-0x19b,_0xee9304-0x203);}return _0x4a648a;};continue;case'3':for(var _0x51166c=-0x240f+-0xcdb+0x104e*0x3;_0xa358a3[_0x9eb87d(0x17b,0x199,0x129,0x15b)](_0x51166c,_0x42df83[_0x27d36e(0xd1,0x106,0xc6,0xda)]);_0x51166c++){var _0x4b3eb6=_0xa358a3[_0x27d36e(0x7e,0xb9,0xe0,0xbe)][_0x27d36e(0xc0,0xf0,0x124,0xbc)]('|'),_0x3d5cf3=-0x1dfd+0x177+-0x4c1*-0x6;while(!![]){switch(_0x4b3eb6[_0x3d5cf3++]){case'0':_0x3e3ffa[_0x27d36e(0xac,0xb5,0x87,0x7f)]=_0x5dd5b5[_0x9eb87d(0x189,0x13f,0x141,0x15d)](_0x5dd5b5);continue;case'1':_0x2e1998[_0xd9cab8]=_0x3e3ffa;continue;case'2':var _0x5cd2bd=_0x2e1998[_0xd9cab8]||_0x3e3ffa;continue;case'3':var _0xd9cab8=_0x42df83[_0x51166c];continue;case'4':var _0x3e3ffa=_0x5dd5b5[_0x27d36e(0xd6,0xc1,0xd9,0xf1)+'r'][_0x27d36e(0x106,0xde,0xb3,0x10f)][_0x27d36e(0xc5,0xfd,0x118,0xd8)](_0x5dd5b5);continue;case'5':_0x3e3ffa[_0x27d36e(0x126,0x121,0xfe,0x141)]=_0x5cd2bd['toString'][_0x9eb87d(0x19b,0x18d,0x12f,0x15d)](_0x5cd2bd);continue;}break;}}continue;case'4':var _0x42df83=[_0xa358a3['Svlmi'],_0xa358a3['JVApS'],_0xa358a3[_0x9eb87d(0x13b,0x128,0x119,0x12c)],_0xa358a3[_0x9eb87d(0x156,0x182,0x18e,0x152)],_0xa358a3[_0x9eb87d(0x147,0x10e,0x142,0x13d)],_0xa358a3[_0x27d36e(0xcc,0xc2,0xa8,0xbd)],_0xa358a3[_0x27d36e(0xcf,0xf1,0xd1,0xe7)]];continue;case'5':var _0x2e1998=_0x35a911[_0x9eb87d(0x125,0x128,0x163,0x138)]=_0x35a911['console']||{};continue;}break;}});function _0x4e53ca(_0x577896,_0x4c971a,_0x1ae8e5,_0x362c89){return _0x4c85(_0x4c971a-0xd3,_0x1ae8e5);}_0x4e0d4d();const type=Object[_0xd06578(-0x24b,-0x22d,-0x25b,-0x249)](msg['message'])[-0x1af8+0x4ab*-0x7+0x3ba5],selectedButton=type==_0x4e53ca(0x1d4,0x197,0x1a6,0x1ba)+_0x4e53ca(0x17a,0x189,0x1ba,0x14d)+'ge'?msg[_0x4e53ca(0x1d5,0x198,0x1a0,0x19a)][_0xd06578(-0x229,-0x256,-0x21c,-0x241)+'ponseMessa'+'ge'][_0x4e53ca(0x1c4,0x1a8,0x16b,0x1ab)+_0x4e53ca(0x1d2,0x1bc,0x1a6,0x1d5)]:'';function _0x4c85(_0x423a11,_0x1c4515){var _0x546fee=_0x546f();return _0x4c85=function(_0x4c855b,_0x38d856){_0x4c855b=_0x4c855b-(0x2f9*-0x4+0x833*0x2+-0x3f7);var _0x1f7089=_0x546fee[_0x4c855b];return _0x1f7089;},_0x4c85(_0x423a11,_0x1c4515);}switch(selectedButton){case _0xd06578(-0x22d,-0x270,-0x23b,-0x24b):await conn[_0x4e53ca(0x187,0x19e,0x16b,0x18a)+'e'](msg['key'][_0x4e53ca(0x1c8,0x19d,0x178,0x17a)],_0xd06578(-0x1f0,-0x1d2,-0x220,-0x20d)+_0xd06578(-0x270,-0x250,-0x238,-0x246),MessageType['text']);break;}function _0xd06578(_0xd4fd5b,_0x117d4e,_0x7a6b78,_0x3aeb2e){return _0x4c85(_0x3aeb2e- -0x305,_0x117d4e);}if(msg['messageStu'+_0xd06578(-0x27a,-0x223,-0x2a2,-0x265)]===-0x2217*-0x1+0x2334+-0x1*0x452b||msg['messageStu'+_0x4e53ca(0x13f,0x173,0x13f,0x1af)]===-0xc67+-0x65*-0x56+-0x1*0x156b){var gb=await getMessage(msg['key'][_0x4e53ca(0x1d8,0x19d,0x1c3,0x1c5)],_0x4e53ca(0x1f2,0x1c9,0x1d5,0x1e5));if(gb!==![]){if(gb[_0x4e53ca(0x1bc,0x198,0x16b,0x178)][_0xd06578(-0x26b,-0x26e,-0x29b,-0x275)]('{pp}')){let pp;try{pp=await conn[_0xd06578(-0x241,-0x1fb,-0x23c,-0x22d)+_0x4e53ca(0x175,0x195,0x1a5,0x1bc)](msg['messageStu'+_0xd06578(-0x263,-0x24f,-0x2a1,-0x26a)+'s'][0x8dd+0x2499+0x16bb*-0x2]);}catch{pp=await conn['getProfile'+'Picture']();}var pinkjson=await conn['groupMetad'+_0x4e53ca(0x178,0x1ae,0x1de,0x1a8)](msg[_0xd06578(-0x232,-0x21b,-0x1cb,-0x1f8)]['remoteJid']);const tag='@'+msg['messageStu'+_0x4e53ca(0x14a,0x16e,0x1b0,0x18c)+'s'][0x35f+0x3f1*0x3+-0xf32]['split']('@')[0x2a*-0x20+-0x3a6*0xa+-0x1*-0x29bc];var _0x39e61b={};_0x39e61b[_0x4e53ca(0x1a0,0x19c,0x1ce,0x183)]='Asia/Kolka'+'ta';var time=new Date()[_0xd06578(-0x227,-0x1fd,-0x201,-0x210)+_0xd06578(-0x273,-0x264,-0x273,-0x264)]('HI',_0x39e61b)[_0xd06578(-0x25c,-0x25c,-0x241,-0x23f)]('\x20')[-0x103d+0x6bd*0x2+0x2c4],_0x755b83={};_0x755b83[_0x4e53ca(0x194,0x17d,0x194,0x1ad)+'pe']=_0x4e53ca(0x1a8,0x193,0x1a1,0x17c)+'r',await axios[_0x4e53ca(0x1a0,0x1d4,0x1a4,0x1e3)](pp,_0x755b83)[_0xd06578(-0x28d,-0x23d,-0x286,-0x26f)](async _0x439593=>{var _0x1fa010={};_0x1fa010[_0x5accc3(-0xa,0xe,0x24,-0xd)]=_0x5accc3(0x56,0x26,0x26,0x63);function _0x5630e3(_0x192802,_0x532683,_0x432c00,_0x16f386){return _0xd06578(_0x192802-0x1a4,_0x432c00,_0x432c00-0x135,_0x16f386-0x471);}_0x1fa010[_0x5accc3(0xb,0x44,0x34,0x48)]=_0x5accc3(0x52,0x72,0x3f,0x33),_0x1fa010[_0x5accc3(0x5f,0x3a,0x3f,0x60)]=_0x5accc3(-0x4c,-0x3,0x20,-0xa),_0x1fa010[_0x5accc3(0x6a,0x1a,0x11,0x4c)]=_0x5630e3(0x25b,0x249,0x21c,0x22a);function _0x5accc3(_0x469e69,_0x3ad2bf,_0x7bed15,_0x44f7e9){return _0xd06578(_0x469e69-0x28,_0x469e69,_0x7bed15-0x14e,_0x44f7e9-0x266);}var _0x398900=_0x1fa010;await conn['sendMessag'+'e'](msg['key'][_0x5630e3(0x21b,0x240,0x24f,0x236)],_0x439593[_0x5630e3(0x1d2,0x229,0x1ef,0x20a)],MessageType[_0x5accc3(0x33,0x66,0x2c,0x67)],{'thumbnail':fs['readFileSy'+'nc']('./media/im'+_0x5630e3(0x27f,0x284,0x222,0x25c)+'g'),'caption':gb[_0x5630e3(0x231,0x1f0,0x21f,0x231)]['replace'](_0x398900[_0x5630e3(0x1ed,0x1e5,0x1ca,0x1fe)],'')[_0x5accc3(0xc,0x14,0x25,-0x11)](_0x398900[_0x5630e3(0x22b,0x22f,0x234,0x253)],pinkjson['subject'])[_0x5630e3(0x227,0x1be,0x1e8,0x1fa)](_0x5accc3(0x1e,0x2c,-0x1b,0x4),pinkjson['owner'])['replace'](_0x398900[_0x5accc3(0x9a,0x84,0x8f,0x60)],pinkjson['desc'])[_0x5630e3(0x1d9,0x213,0x214,0x1fa)](_0x5630e3(0x222,0x254,0x236,0x227),conn['user'][_0x5accc3(0x69,0x45,0x35,0x45)])[_0x5accc3(-0x26,-0x4f,0xf,-0x11)](_0x398900[_0x5accc3(0x6e,0x4b,0x1e,0x4c)],time)[_0x5630e3(0x1e0,0x1cb,0x1b8,0x1fa)](_0x5accc3(0x18,0x4b,0x44,0xd),tag),'contextInfo':{'mentionedJid':[msg['messageStu'+'bParameter'+'s'][0x1e0a+-0x2f9*0x5+-0xf2d]]}});});}else{if(gb[_0xd06578(-0x231,-0x24a,-0x262,-0x240)][_0xd06578(-0x2b0,-0x29b,-0x253,-0x275)]('{gp}')){let gp;try{gp=await conn[_0x4e53ca(0x16c,0x1ab,0x1aa,0x1a9)+'Picture'](msg[_0x4e53ca(0x1a1,0x1e0,0x1a5,0x221)][_0x4e53ca(0x1c2,0x19d,0x18f,0x1b3)]);}catch{gp=await conn[_0xd06578(-0x20b,-0x20d,-0x200,-0x22d)+_0x4e53ca(0x1bb,0x195,0x17e,0x163)]();}const tag='@'+msg[_0xd06578(-0x22c,-0x24e,-0x25f,-0x250)+'bParameter'+'s'][-0xd06*-0x2+0x1f8d*-0x1+0x581][_0xd06578(-0x268,-0x236,-0x275,-0x23f)]('@')[-0x5*-0x6df+-0x2*0x737+0x1*-0x13ed];var rashijson=await conn[_0xd06578(-0x255,-0x1f2,-0x238,-0x21b)+_0x4e53ca(0x17e,0x1ae,0x1e6,0x1be)](msg['key'][_0xd06578(-0x21f,-0x269,-0x21e,-0x23b)]),_0x5e9980={};_0x5e9980[_0xd06578(-0x267,-0x277,-0x22b,-0x23c)]=_0xd06578(-0x22e,-0x278,-0x244,-0x260)+'ta';var time=new Date()[_0x4e53ca(0x1b0,0x1c8,0x205,0x208)+_0x4e53ca(0x15f,0x174,0x154,0x165)]('HI',_0x5e9980)['split']('\x20')[-0x1511+-0x25e3+0x3*0x13a7],_0x442d96={};_0x442d96[_0x4e53ca(0x1a8,0x17d,0x157,0x190)+'pe']=_0xd06578(-0x268,-0x24b,-0x209,-0x245)+'r',await axios[_0x4e53ca(0x1b3,0x1d4,0x1d0,0x1df)](gp,_0x442d96)[_0x4e53ca(0x163,0x169,0x152,0x14a)](async _0x3a75b6=>{function _0x1dd4d8(_0x1cbd14,_0x2c7f88,_0x1aef66,_0x3866fd){return _0x4e53ca(_0x1cbd14-0xe9,_0x3866fd-0x237,_0x1aef66,_0x3866fd-0xa7);}var _0x1e9969={};_0x1e9969[_0xd0175a(0x8a,0x4c,0x2e,0x5d)]='{gp}',_0x1e9969[_0x1dd4d8(0x372,0x3dd,0x387,0x3ae)]=_0x1dd4d8(0x3d8,0x410,0x3d2,0x3dc),_0x1e9969[_0x1dd4d8(0x3f0,0x41c,0x3f2,0x406)]='{gpmaker}',_0x1e9969[_0xd0175a(0x52,0x5a,0x1d,0x58)]='{gpdesc}',_0x1e9969[_0xd0175a(-0x29,-0x16,0x1a,-0x20)]=_0xd0175a(0x29,0xc,-0x2e,0x4d),_0x1e9969[_0x1dd4d8(0x412,0x3bc,0x3c7,0x3ef)]=_0x1dd4d8(0x3f9,0x3db,0x3cc,0x3c8);function _0xd0175a(_0x4181e9,_0x2f463b,_0x448b37,_0xef1817){return _0xd06578(_0x4181e9-0xa5,_0xef1817,_0x448b37-0x13a,_0x2f463b-0x256);}_0x1e9969[_0x1dd4d8(0x3f4,0x3ce,0x3c4,0x3d9)]='{mention}';var _0x7e85bb=_0x1e9969;await conn[_0xd0175a(0x2c,0x1c,0x11,-0x1b)+'e'](msg['key']['remoteJid'],_0x3a75b6[_0xd0175a(-0x45,-0x11,0x25,-0x51)],MessageType[_0x1dd4d8(0x430,0x3cf,0x41c,0x410)],{'thumbnail':fs[_0x1dd4d8(0x445,0x3e9,0x3da,0x40d)+'nc'](_0x1dd4d8(0x3e8,0x41e,0x3c3,0x3f2)+'age/bye.jp'+'g'),'caption':gb[_0xd0175a(0x2e,0x16,0x26,0x11)][_0xd0175a(0x1a,-0x21,-0xf,-0x42)](_0x7e85bb[_0x1dd4d8(0x437,0x434,0x440,0x405)],'')[_0xd0175a(-0x2f,-0x21,-0x3c,-0x5)](_0x7e85bb[_0xd0175a(0x2,-0xb,0x16,0x18)],rashijson['subject'])[_0xd0175a(-0x57,-0x21,-0x48,-0x40)](_0x7e85bb[_0xd0175a(0x87,0x4d,0x35,0x4d)],rashijson[_0xd0175a(0x8b,0x4f,0x20,0x61)])[_0x1dd4d8(0x386,0x38a,0x3ac,0x398)](_0x7e85bb[_0x1dd4d8(0x3e7,0x3ef,0x451,0x413)],rashijson[_0xd0175a(0x6b,0x43,0x34,0x28)])[_0x1dd4d8(0x3a6,0x3cf,0x38f,0x398)](_0x7e85bb[_0xd0175a(-0x4e,-0x16,-0x48,0x6)],conn[_0xd0175a(0x8b,0x5d,0x88,0x4f)][_0x1dd4d8(0x415,0x3db,0x3b2,0x3ee)])['replace'](_0x7e85bb[_0xd0175a(0x57,0x36,0x37,0x4f)],time)['replace'](_0x7e85bb[_0x1dd4d8(0x3ef,0x3c4,0x398,0x3d9)],tag),'contextInfo':{'mentionedJid':[msg[_0xd0175a(-0x3a,0x6,-0x1c,-0x30)+_0x1dd4d8(0x3ca,0x3a2,0x3bf,0x3a5)+'s'][0x3*-0x92d+0x1bc7+-0x40*0x1]]}});});}else{if(gb[_0xd06578(-0x24a,-0x262,-0x25e,-0x240)]['includes'](_0x4e53ca(0x1b0,0x172,0x15d,0x15a))){const tag='@'+msg[_0xd06578(-0x27e,-0x262,-0x252,-0x250)+_0xd06578(-0x292,-0x229,-0x23b,-0x26a)+'s'][-0x92*-0xc+0x1ec1+-0x2599][_0x4e53ca(0x191,0x199,0x1da,0x18f)]('@')[0x6d6+0x28*-0x89+-0xe92*-0x1];var _0x2d7acf={};_0x2d7acf[_0x4e53ca(0x14e,0x17d,0x1b4,0x1bb)+'pe']=_0x4e53ca(0x1b6,0x193,0x179,0x17a)+'r';var plkpinky=await axios[_0xd06578(-0x1ed,-0x1d0,-0x219,-0x204)](config[_0xd06578(-0x211,-0x20b,-0x24a,-0x20c)],_0x2d7acf),pinkjson=await conn[_0xd06578(-0x1e6,-0x1fb,-0x20f,-0x21b)+_0xd06578(-0x23c,-0x21b,-0x22a,-0x22a)](msg[_0xd06578(-0x1e1,-0x1b8,-0x1fa,-0x1f8)][_0x4e53ca(0x1da,0x19d,0x180,0x1a4)]),_0x153cc1={};_0x153cc1[_0x4e53ca(0x1d2,0x19c,0x1b5,0x1a7)]=_0x4e53ca(0x15b,0x178,0x164,0x1a0)+'ta';var time=new Date()['toLocaleSt'+_0x4e53ca(0x14f,0x174,0x1b0,0x19a)]('HI',_0x153cc1)[_0xd06578(-0x23b,-0x244,-0x23a,-0x23f)]('\x20')[-0x6*-0x5b5+-0x75d*0x1+-0x1*0x1ae0];await conn['sendMessag'+'e'](msg[_0x4e53ca(0x1b8,0x1e0,0x219,0x1dd)][_0xd06578(-0x25c,-0x238,-0x214,-0x23b)],Buffer[_0xd06578(-0x220,-0x243,-0x20e,-0x214)](plkpinky['data']),MessageType[_0xd06578(-0x256,-0x2b5,-0x25d,-0x279)],{'thumbnail':fs[_0xd06578(-0x1c8,-0x1f8,-0x1c2,-0x202)+'nc'](_0xd06578(-0x1e5,-0x25a,-0x241,-0x21d)+_0x4e53ca(0x1c3,0x1c3,0x1af,0x1e2)+'g'),'mimetype':Mimetype[_0x4e53ca(0x1f0,0x1d3,0x1e0,0x1b2)],'caption':gb['message'][_0x4e53ca(0x124,0x161,0x14b,0x182)]('{gif}','')[_0xd06578(-0x23f,-0x24d,-0x247,-0x277)]('{gphead}',pinkjson[_0xd06578(-0x27f,-0x28e,-0x272,-0x25a)])['replace'](_0x4e53ca(0x138,0x176,0x1b2,0x173),pinkjson[_0x4e53ca(0x213,0x1d1,0x1e0,0x1d2)])[_0x4e53ca(0x124,0x161,0x140,0x197)]('{gpdesc}',pinkjson[_0x4e53ca(0x1c1,0x1c5,0x1da,0x1b3)])['replace']('{owner}',conn[_0x4e53ca(0x20e,0x1df,0x207,0x207)]['name'])[_0xd06578(-0x291,-0x242,-0x259,-0x277)](_0xd06578(-0x267,-0x273,-0x217,-0x247),time)[_0xd06578(-0x2a2,-0x25e,-0x2a5,-0x277)](_0xd06578(-0x27f,-0x28e,-0x23b,-0x259),tag),'contextInfo':{'mentionedJid':[msg[_0x4e53ca(0x1be,0x188,0x18c,0x15d)+'bParameter'+'s'][-0x66d+0x1c46+0x2f*-0x77]]}});}else{var _0x350e0b={};_0x350e0b[_0xd06578(-0x204,-0x276,-0x255,-0x23c)]=_0x4e53ca(0x1aa,0x178,0x15a,0x185)+'ta';var time=new Date()[_0x4e53ca(0x1db,0x1c8,0x1e1,0x1c2)+_0x4e53ca(0x134,0x174,0x16c,0x16f)]('HI',_0x350e0b)[_0x4e53ca(0x170,0x199,0x19a,0x19c)]('\x20')[-0x2323+0x11cd+0x1157];const tag='@'+msg[_0xd06578(-0x244,-0x24d,-0x26e,-0x250)+_0xd06578(-0x278,-0x250,-0x2aa,-0x26a)+'s'][-0x1*-0x883+-0x12bc+-0x1*-0xa39][_0x4e53ca(0x17a,0x199,0x1bc,0x159)]('@')[0x65b+-0x8b2+0x257];await conn['sendMessag'+'e'](msg[_0xd06578(-0x20c,-0x224,-0x216,-0x1f8)]['remoteJid'],gb[_0xd06578(-0x224,-0x254,-0x247,-0x240)]['replace'](_0xd06578(-0x251,-0x234,-0x222,-0x233),pinkjson[_0x4e53ca(0x145,0x17e,0x13f,0x165)])['replace'](_0xd06578(-0x240,-0x25a,-0x265,-0x262),pinkjson['owner'])[_0x4e53ca(0x17f,0x161,0x1a1,0x16f)]('{gpdesc}',pinkjson[_0x4e53ca(0x1da,0x1c5,0x1a1,0x190)])['replace'](_0x4e53ca(0x174,0x18e,0x164,0x1b0),conn[_0x4e53ca(0x1ef,0x1df,0x1a6,0x1fc)][_0xd06578(-0x1e6,-0x1fa,-0x24c,-0x221)])['replace'](_0x4e53ca(0x191,0x191,0x151,0x18c),time)['replace']('{mention}',tag),MessageType['text'],{'contextInfo':{'mentionedJid':[msg[_0x4e53ca(0x18b,0x188,0x147,0x1a2)+'bParameter'+'s'][0x1*-0x26e+0x120c+0x2*-0x7cf]]}});}}}}return;}else{if(msg[_0x4e53ca(0x1a4,0x188,0x1a9,0x14e)+_0xd06578(-0x22b,-0x27a,-0x285,-0x265)]===0x965+0x2325+-0x1a*0x1b5||msg['messageStu'+_0xd06578(-0x24f,-0x246,-0x28f,-0x265)]===-0x1f5*0xd+0x1*-0x112d+0x2ac7){if(config[_0xd06578(-0x1fe,-0x20f,-0x25b,-0x22b)]==_0xd06578(-0x21f,-0x23b,-0x1e3,-0x218)){await conn[_0x4e53ca(0x1b3,0x19e,0x1b9,0x16b)+'e'](msg[_0xd06578(-0x1db,-0x208,-0x205,-0x1f8)][_0x4e53ca(0x1a3,0x19d,0x177,0x18a)],_0xd06578(-0x1e7,-0x258,-0x21e,-0x21f)+'o*',MessageType[_0xd06578(-0x258,-0x295,-0x24a,-0x256)]),await conn[_0xd06578(-0x201,-0x261,-0x245,-0x23a)+'e'](msg['key'][_0xd06578(-0x266,-0x22d,-0x227,-0x23b)],'.block',MessageType[_0x4e53ca(0x185,0x182,0x1b2,0x17c)]);return;}}else{if(msg[_0x4e53ca(0x176,0x188,0x15f,0x1ad)+_0xd06578(-0x279,-0x279,-0x232,-0x265)]===0x170f*0x1+0x26b2+-0x3da6||msg[_0xd06578(-0x290,-0x262,-0x25f,-0x250)+_0x4e53ca(0x15f,0x173,0x159,0x14b)]===-0xe96*-0x1+0x21f3+-0x306a){const tag='@'+msg['messageStu'+_0x4e53ca(0x152,0x16e,0x151,0x139)+'s'][-0x1a41+0x590+0x1*0x14b1]['split']('@')[0x580+0x1c2b*0x1+0x1fb*-0x11];var gb=await getMessage(msg['key']['remoteJid']);if(gb!==![]){if(gb[_0x4e53ca(0x17b,0x198,0x195,0x182)][_0xd06578(-0x26c,-0x2ac,-0x2a8,-0x275)](_0x4e53ca(0x215,0x1d5,0x214,0x1c1))){let pp;try{pp=await conn[_0x4e53ca(0x1d8,0x1ab,0x17d,0x1d6)+'Picture'](msg[_0xd06578(-0x275,-0x24f,-0x27c,-0x250)+_0xd06578(-0x24f,-0x2a4,-0x254,-0x26a)+'s'][-0x124c*-0x1+0xd76+-0xa96*0x3]);}catch{pp=await conn[_0xd06578(-0x242,-0x24e,-0x265,-0x22d)+_0xd06578(-0x261,-0x26e,-0x230,-0x243)]();}var pinkjson=await conn[_0x4e53ca(0x1f6,0x1bd,0x1ab,0x19b)+_0x4e53ca(0x18e,0x1ae,0x174,0x18c)](msg[_0xd06578(-0x22b,-0x1d2,-0x1e5,-0x1f8)][_0x4e53ca(0x184,0x19d,0x1a5,0x168)]),_0xe4e3f5={};_0xe4e3f5[_0xd06578(-0x209,-0x256,-0x24c,-0x23c)]='Asia/Kolka'+'ta';var time=new Date()['toLocaleSt'+_0x4e53ca(0x1aa,0x174,0x134,0x18c)]('HI',_0xe4e3f5)[_0xd06578(-0x268,-0x25e,-0x208,-0x23f)]('\x20')[-0xff9+-0x15f1+-0x25eb*-0x1],_0x3c38b6={};_0x3c38b6[_0x4e53ca(0x170,0x17d,0x164,0x19c)+'pe']=_0x4e53ca(0x18c,0x193,0x16f,0x153)+'r',await axios[_0x4e53ca(0x20c,0x1d4,0x1a3,0x1b8)](pp,_0x3c38b6)[_0xd06578(-0x2ab,-0x2a5,-0x27b,-0x26f)](async _0x1a4627=>{var _0x15c6b9={};_0x15c6b9[_0xc3c142(0x3d1,0x40a,0x428,0x434)]=_0xc3c142(0x417,0x3ee,0x423,0x427);function _0xc3c142(_0x431f81,_0x3f8977,_0x2e0acc,_0x50f23f){return _0xd06578(_0x431f81-0xd2,_0x431f81,_0x2e0acc-0x10d,_0x3f8977-0x621);}_0x15c6b9[_0xc3c142(0x3bd,0x3cc,0x3e7,0x3ea)]=_0xc3c142(0x37e,0x3bf,0x3c5,0x3c7),_0x15c6b9[_0x2e2803(0x4ac,0x4db,0x4a0,0x49f)]=_0xc3c142(0x3ed,0x3b1,0x388,0x386);function _0x2e2803(_0x101300,_0x879fb8,_0x5a24d1,_0x165f8e){return _0xd06578(_0x101300-0x1bc,_0x5a24d1,_0x5a24d1-0xcf,_0x101300-0x6a9);}_0x15c6b9[_0xc3c142(0x3e7,0x421,0x443,0x3f5)]=_0xc3c142(0x407,0x3d7,0x413,0x3e9),_0x15c6b9['wotXb']='{time}',_0x15c6b9[_0xc3c142(0x408,0x427,0x45f,0x401)]='{mention}';var _0x588ac1=_0x15c6b9;await conn[_0x2e2803(0x46f,0x471,0x472,0x477)+'e'](msg[_0x2e2803(0x4b1,0x4c3,0x485,0x4be)][_0xc3c142(0x3d6,0x3e6,0x3a6,0x3b3)],_0x1a4627['data'],MessageType[_0x2e2803(0x4aa,0x4ad,0x4a2,0x487)],{'thumbnail':fs['readFileSy'+'nc'](_0xc3c142(0x3eb,0x404,0x444,0x424)+'age/wel.jp'+'g'),'caption':gb['message'][_0x2e2803(0x432,0x470,0x439,0x471)](_0xc3c142(0x412,0x41e,0x430,0x424),'')['replace'](_0x588ac1[_0x2e2803(0x492,0x475,0x48f,0x45a)],pinkjson['subject'])[_0xc3c142(0x3df,0x3aa,0x399,0x3d0)](_0x588ac1[_0x2e2803(0x454,0x414,0x42a,0x419)],pinkjson['owner'])[_0x2e2803(0x432,0x420,0x408,0x409)](_0x588ac1[_0xc3c142(0x3ea,0x424,0x44f,0x45c)],pinkjson[_0x2e2803(0x496,0x4aa,0x4b4,0x469)])['replace'](_0x588ac1[_0x2e2803(0x4a9,0x467,0x4d8,0x4e1)],conn[_0xc3c142(0x422,0x428,0x467,0x412)]['name'])[_0x2e2803(0x432,0x42c,0x426,0x424)](_0x588ac1['wotXb'],time)[_0x2e2803(0x432,0x40d,0x3f6,0x46f)](_0x588ac1[_0x2e2803(0x4af,0x47e,0x49f,0x4e2)],tag),'contextInfo':{'mentionedJid':[msg['messageStu'+_0xc3c142(0x3f9,0x3b7,0x390,0x3eb)+'s'][-0x1fe8+-0xb+-0x1*-0x1ff3]]}});});}else{if(gb['message'][_0x4e53ca(0x127,0x163,0x180,0x16b)]('{gp}')){const tag='@'+msg[_0x4e53ca(0x1a6,0x188,0x1a6,0x152)+_0xd06578(-0x22f,-0x273,-0x259,-0x26a)+'s'][-0x1b60+-0x11*-0x14a+0x2*0x2bb]['split']('@')[0x263f*-0x1+-0x3e*0x77+0x3b*0x123];let gp;try{gp=await conn[_0x4e53ca(0x1cd,0x1ab,0x1c7,0x1a2)+_0xd06578(-0x26e,-0x281,-0x22d,-0x243)](msg[_0xd06578(-0x21a,-0x231,-0x1ef,-0x1f8)][_0x4e53ca(0x17a,0x19d,0x189,0x1c4)]);}catch{gp=await conn[_0x4e53ca(0x1a9,0x1ab,0x18c,0x175)+'Picture']();}var _0x269d98={};_0x269d98['timeZone']=_0x4e53ca(0x1b5,0x178,0x143,0x192)+'ta';var time=new Date()[_0xd06578(-0x1f2,-0x20a,-0x21d,-0x210)+_0xd06578(-0x289,-0x28e,-0x23b,-0x264)]('HI',_0x269d98)[_0x4e53ca(0x16f,0x199,0x1ca,0x160)]('\x20')[0x1d37+-0x40*0x73+-0x76],rashijson=await conn[_0xd06578(-0x207,-0x239,-0x251,-0x21b)+_0x4e53ca(0x1ca,0x1ae,0x195,0x184)](msg[_0xd06578(-0x1da,-0x218,-0x1f2,-0x1f8)][_0x4e53ca(0x15e,0x19d,0x1db,0x179)]),_0x367b6f={};_0x367b6f['responseTy'+'pe']=_0xd06578(-0x212,-0x236,-0x216,-0x245)+'r',await axios['get'](gp,_0x367b6f)[_0x4e53ca(0x17b,0x169,0x1a6,0x187)](async _0x165ed6=>{var _0x3d039b={};_0x3d039b[_0x475e3b(-0x2ce,-0x295,-0x27e,-0x271)]=_0x475e3b(-0x255,-0x240,-0x275,-0x282)+'age/wel.jp'+'g';function _0x483415(_0x4b3bef,_0x57c9ae,_0x2f0be7,_0xf43dc6){return _0x4e53ca(_0x4b3bef-0x10a,_0x4b3bef- -0x479,_0xf43dc6,_0xf43dc6-0x128);}_0x3d039b[_0x483415(-0x2d8,-0x316,-0x2e4,-0x2f0)]=_0x475e3b(-0x23b,-0x235,-0x24b,-0x24d),_0x3d039b[_0x475e3b(-0x253,-0x23c,-0x276,-0x245)]=_0x483415(-0x2d4,-0x2d4,-0x2dc,-0x2c6),_0x3d039b[_0x475e3b(-0x22c,-0x22e,-0x247,-0x20d)]=_0x483415(-0x303,-0x343,-0x33d,-0x303),_0x3d039b['rMDgj']=_0x483415(-0x311,-0x34d,-0x336,-0x30d),_0x3d039b['LJkKf']=_0x483415(-0x2eb,-0x2fd,-0x2b3,-0x2bd),_0x3d039b[_0x483415(-0x2b2,-0x2c2,-0x2cc,-0x2db)]=_0x475e3b(-0x232,-0x26a,-0x2a7,-0x28f),_0x3d039b[_0x475e3b(-0x25e,-0x25b,-0x232,-0x286)]=_0x483415(-0x2fa,-0x2e7,-0x324,-0x312);var _0x43c26b=_0x3d039b;function _0x475e3b(_0x563c22,_0x13d971,_0x594dba,_0x46176f){return _0xd06578(_0x563c22-0x196,_0x46176f,_0x594dba-0x2,_0x13d971- -0x23);}await conn[_0x483415(-0x2db,-0x2c3,-0x313,-0x2f7)+'e'](msg[_0x475e3b(-0x1e1,-0x21b,-0x21e,-0x235)][_0x483415(-0x2dc,-0x31e,-0x301,-0x2e4)],_0x165ed6[_0x475e3b(-0x282,-0x28a,-0x2c6,-0x2bc)],MessageType['image'],{'thumbnail':fs[_0x483415(-0x2a3,-0x2e2,-0x2cf,-0x2bc)+'nc'](_0x43c26b['POWqd']),'caption':gb[_0x483415(-0x2e1,-0x2e0,-0x2e7,-0x2dc)][_0x475e3b(-0x2b4,-0x29a,-0x296,-0x2a5)](_0x43c26b[_0x475e3b(-0x219,-0x25a,-0x296,-0x288)],'')[_0x483415(-0x318,-0x32f,-0x2d8,-0x2ee)](_0x43c26b[_0x483415(-0x2ba,-0x296,-0x2c4,-0x2e4)],rashijson['subject'])[_0x475e3b(-0x2c2,-0x29a,-0x2c4,-0x2b8)](_0x43c26b['NBWfg'],rashijson[_0x483415(-0x2a8,-0x26e,-0x2c9,-0x2c7)])[_0x483415(-0x318,-0x32b,-0x334,-0x321)](_0x43c26b[_0x483415(-0x2c3,-0x2f8,-0x2e2,-0x2c2)],rashijson[_0x483415(-0x2b4,-0x2dc,-0x2e6,-0x2b8)])[_0x483415(-0x318,-0x354,-0x31b,-0x2e4)](_0x43c26b[_0x483415(-0x2f5,-0x329,-0x2c5,-0x2d1)],conn['user'][_0x483415(-0x2c2,-0x2a7,-0x2d3,-0x2d4)])[_0x483415(-0x318,-0x334,-0x356,-0x357)](_0x43c26b[_0x483415(-0x2b2,-0x2d2,-0x2b8,-0x276)],time)[_0x483415(-0x318,-0x326,-0x306,-0x354)](_0x43c26b[_0x483415(-0x2d9,-0x2d1,-0x2f8,-0x303)],tag),'contextInfo':{'mentionedJid':[msg[_0x483415(-0x2f1,-0x302,-0x2d0,-0x31b)+_0x483415(-0x30b,-0x321,-0x2e7,-0x303)+'s'][-0x1c87+0x133*-0x10+0x98b*0x5]]}});});}else{if(gb[_0xd06578(-0x241,-0x235,-0x24a,-0x240)]['includes'](_0x4e53ca(0x169,0x172,0x149,0x13b))){var _0x3b93a9={};_0x3b93a9[_0x4e53ca(0x1a4,0x19c,0x1a6,0x1ab)]=_0x4e53ca(0x13a,0x178,0x1b1,0x13d)+'ta';var time=new Date()['toLocaleSt'+_0xd06578(-0x252,-0x241,-0x274,-0x264)]('HI',_0x3b93a9)[_0xd06578(-0x248,-0x233,-0x22a,-0x23f)]('\x20')[0x1*0x2195+0x1546+-0x36da];const tag='@'+msg['messageStu'+_0xd06578(-0x234,-0x265,-0x284,-0x26a)+'s'][-0xb*-0x1b7+0x2*-0xc77+0x611][_0x4e53ca(0x197,0x199,0x1da,0x1bc)]('@')[0x300+0xb*-0x24b+0x1639];var _0x569a97={};_0x569a97[_0x4e53ca(0x155,0x17d,0x190,0x19f)+'pe']=_0xd06578(-0x23d,-0x21a,-0x20c,-0x245)+'r';var plkpinky=await axios[_0xd06578(-0x1c6,-0x203,-0x1ed,-0x204)](config['WEL_GIF'],_0x569a97),pinkjson=await conn[_0x4e53ca(0x1cb,0x1bd,0x1a5,0x1ac)+_0x4e53ca(0x1d1,0x1ae,0x1d9,0x1d0)](msg[_0xd06578(-0x1ed,-0x21a,-0x1ed,-0x1f8)]['remoteJid']);await conn[_0xd06578(-0x214,-0x20f,-0x251,-0x23a)+'e'](msg[_0x4e53ca(0x21a,0x1e0,0x20e,0x21b)][_0xd06578(-0x223,-0x22c,-0x23f,-0x23b)],Buffer[_0xd06578(-0x242,-0x214,-0x1dc,-0x214)](plkpinky[_0x4e53ca(0x173,0x171,0x1ad,0x1aa)]),MessageType['video'],{'thumbnail':fs[_0x4e53ca(0x1cd,0x1d6,0x218,0x1e6)+'nc'](_0x4e53ca(0x1c4,0x1bb,0x182,0x19b)+_0xd06578(-0x28b,-0x228,-0x282,-0x268)+'g'),'mimetype':Mimetype[_0x4e53ca(0x1ad,0x1d3,0x1d9,0x19b)],'caption':gb[_0x4e53ca(0x186,0x198,0x1a7,0x15f)]['replace'](_0xd06578(-0x288,-0x2a5,-0x23a,-0x266),'')[_0x4e53ca(0x139,0x161,0x197,0x18f)](_0x4e53ca(0x1a4,0x1a5,0x1cf,0x178),pinkjson[_0xd06578(-0x276,-0x26f,-0x28a,-0x25a)])[_0xd06578(-0x275,-0x248,-0x24e,-0x277)](_0xd06578(-0x232,-0x223,-0x27a,-0x262),pinkjson['owner'])[_0xd06578(-0x2b5,-0x24a,-0x27a,-0x277)](_0x4e53ca(0x144,0x168,0x17e,0x15b),pinkjson[_0xd06578(-0x1d2,-0x206,-0x232,-0x213)])[_0x4e53ca(0x136,0x161,0x178,0x12e)](_0xd06578(-0x238,-0x27f,-0x22e,-0x24a),conn['user'][_0x4e53ca(0x1c4,0x1b7,0x1a4,0x1ac)])['replace'](_0x4e53ca(0x161,0x191,0x1a2,0x187),time)[_0xd06578(-0x272,-0x2a0,-0x280,-0x277)](_0xd06578(-0x297,-0x281,-0x25a,-0x259),tag),'contextInfo':{'mentionedJid':[msg[_0xd06578(-0x233,-0x223,-0x23b,-0x250)+'bParameter'+'s'][0x2*-0xc58+0x1f41+-0x691]]}});}else{const tag='@'+msg[_0x4e53ca(0x1bc,0x188,0x177,0x1b1)+_0x4e53ca(0x193,0x16e,0x195,0x171)+'s'][-0x1*-0x11e0+0x1af6+0x3*-0xef2][_0xd06578(-0x242,-0x220,-0x237,-0x23f)]('@')[0x1*-0x22a3+0x1e0e+0x495];var _0x52b92a={};_0x52b92a['timeZone']=_0x4e53ca(0x137,0x178,0x1b7,0x18d)+'ta';var time=new Date()['toLocaleSt'+_0x4e53ca(0x16b,0x174,0x142,0x13d)]('HI',_0x52b92a)[_0xd06578(-0x1ff,-0x260,-0x203,-0x23f)]('\x20')[-0xb2*0xd+0xaf0+0x1e5*-0x1],pinkjson=await conn['groupMetad'+'ata'](msg[_0x4e53ca(0x1b7,0x1e0,0x1a0,0x21c)][_0xd06578(-0x1fe,-0x203,-0x21e,-0x23b)]);await conn[_0x4e53ca(0x169,0x19e,0x1d6,0x161)+'e'](msg[_0x4e53ca(0x1a1,0x1e0,0x1ee,0x1f4)][_0xd06578(-0x22a,-0x232,-0x21b,-0x23b)],gb['message'][_0x4e53ca(0x137,0x161,0x158,0x11f)](_0x4e53ca(0x176,0x1a5,0x1e3,0x1b7),pinkjson[_0xd06578(-0x24c,-0x21c,-0x281,-0x25a)])[_0xd06578(-0x260,-0x249,-0x2b6,-0x277)](_0x4e53ca(0x188,0x176,0x18c,0x193),pinkjson[_0x4e53ca(0x20e,0x1d1,0x1d9,0x196)])['replace'](_0x4e53ca(0x165,0x168,0x147,0x188),pinkjson[_0xd06578(-0x1f6,-0x1e7,-0x212,-0x213)])[_0xd06578(-0x28c,-0x28f,-0x2a5,-0x277)](_0xd06578(-0x25a,-0x26b,-0x268,-0x24a),conn[_0xd06578(-0x1d6,-0x1f8,-0x1f6,-0x1f9)][_0x4e53ca(0x1c5,0x1b7,0x196,0x1d6)])[_0x4e53ca(0x14c,0x161,0x177,0x150)]('{time}',time)[_0x4e53ca(0x18e,0x161,0x135,0x153)]('{mention}',tag),MessageType['text'],{'contextInfo':{'mentionedJid':[msg[_0x4e53ca(0x16e,0x188,0x15b,0x1bc)+_0xd06578(-0x290,-0x2a3,-0x228,-0x26a)+'s'][-0x261d+-0xb59+0x2*0x18bb]]}});}}}}return;}}}function _0x546f(){var _0x5273b7=['SUACD','apply','1228362dAouWP','responseTy','subject','{mention}','1|2|0|5|4|','console','text','BlIyU','LJkKf','96JUqqJH','yVLrm','prototype','messageStu','ponseMessa','vOuEM','858676nZOlsx','search','.help','{owner}','keys','BcuXB','{time}','n\x20replay','arraybuffe','6798978qKoYOm','Picture','table','buttonsRes','message','split','JkyVf','EFvUP','timeZone','remoteJid','sendMessag','20jcBicC','kQyWt','pEYTZ','wPrTJ','LGQOF','hTMxP','{gphead}','bind','trace','selectedBu','YGnkb','214606SzoNIM','getProfile','10PuAjKR','CALLB','ata','length','log','66812pYOrql','warn','120GytMKx','nction()\x20','sJgNm','rMDgj','name','Bbzbb','*Ok\x20bye\x20vr','WNDaK','./media/im','ttonId','groupMetad','teTSX','iqbkD','true','OhdsK','400751EdUSzc','age/bye.jp','from','desc','{gp}','zpaTj','toLocaleSt','goodbye','toString','hehe\x20botto','GIF_BYE','NBWfg','cmJJO','HvyJM','(((.+)+)+)','owner','uUOkH','gif','get','{pp}','readFileSy','rmnpK','ePcTZ','image','info','YbYUM','kEoEi','exception','stDZA','user','key','ikYmn','__proto__','video','error','replace','TYGnM','includes','asuQN','BaqRO','POWqd','15807121QHgoan','{gpdesc}','then','constructo','SmipN','NkwFl','bprEy','bParameter','AyhQH','age/wel.jp','data','{gif}','bType','ring','tAmbd','{gpmaker}','MxeDF','Asia/Kolka','mseDi'];_0x546f=function(){return _0x5273b7;};return _0x546f();}

//mention added
        events.commands.map(
            async (command) =>  {
                if (msg.message && msg.message.imageMessage && msg.message.imageMessage.caption) {
                    var text_msg = msg.message.imageMessage.caption;
                } else if (msg.message && msg.message.videoMessage && msg.message.videoMessage.caption) {
                    var text_msg = msg.message.videoMessage.caption;
                } else if (msg.message) {
                    var text_msg = msg.message.extendedTextMessage === null ? msg.message.conversation : msg.message.extendedTextMessage.text;
                } else {
                    var text_msg = undefined;
                }

                if ((command.on !== undefined && (command.on === 'image' || command.on === 'photo')
                    && msg.message && msg.message.imageMessage !== null && 
                    (command.pattern === undefined || (command.pattern !== undefined && 
                        command.pattern.test(text_msg)))) || 
                    (command.pattern !== undefined && command.pattern.test(text_msg)) || 
                    (command.on !== undefined && command.on === 'text' && text_msg) ||
                    // Video
                    (command.on !== undefined && (command.on === 'video')
                    && msg.message && msg.message.videoMessage !== null && 
                    (command.pattern === undefined || (command.pattern !== undefined && 
                        command.pattern.test(text_msg))))) {

                    let sendMsg = false;
                    var chat = conn.chats.get(msg.key.remoteJid)
                        
                    if ((config.SUDO !== false && msg.key.fromMe === false && command.fromMe === true &&
                        (msg.participant && config.SUDO.includes(',') ? config.SUDO.split(',').includes(msg.participant.split('@')[0]) : msg.participant.split('@')[0] == config.SUDO || config.SUDO.includes(',') ? config.SUDO.split(',').includes(msg.key.remoteJid.split('@')[0]) : msg.key.remoteJid.split('@')[0] == config.SUDO)
                    ) || command.fromMe === msg.key.fromMe || (command.fromMe === false && !msg.key.fromMe)) {
                        if (command.onlyPinned && chat.pin === undefined) return;
                        if (!command.onlyPm === chat.jid.includes('-')) sendMsg = true;
                        else if (command.onlyGroup === chat.jid.includes('-')) sendMsg = true;
                    }
                    
                    else if ((config.MAHN !== false && msg.key.fromMe === false && command.fromMe === true &&
                        (msg.participant && config.MAHN.includes(',') ? config.MAHN.split(',').includes(msg.participant.split('@')[0]) : msg.participant.split('@')[0] == config.MAHN || config.MAHN.includes(',') ? config.MAHN.split(',').includes(msg.key.remoteJid.split('@')[0]) : msg.key.remoteJid.split('@')[0] == config.MAHN)
                    ) || command.fromMe === msg.key.fromMe || (command.fromMe === false && !msg.key.fromMe)) {
                        if (command.onlyPinned && chat.pin === undefined) return;
                        if (!command.onlyPm === chat.jid.includes('-')) sendMsg = true;
                        else if (command.onlyGroup === chat.jid.includes('-')) sendMsg = true;
                    }
    
                    if (sendMsg) {
                        if (config.SEND_READ && command.on === undefined) {
                            await conn.chatRead(msg.key.remoteJid);
                        }
                        
                        var match = text_msg.match(command.pattern);
                        
                        if (command.on !== undefined && (command.on === 'image' || command.on === 'photo' )
                        && msg.message.imageMessage !== null) {
                            whats = new Image(conn, msg);
                        } else if (command.on !== undefined && (command.on === 'video' )
                        && msg.message.videoMessage !== null) {
                            whats = new Video(conn, msg);
                        } else {
                            whats = new Message(conn, msg);
                        }
/*
                        if (command.deleteCommand && msg.key.fromMe) {
                            await whats.delete(); 
                        }
*/
                        try {
                            await command.function(whats, match);
                        } catch (error) {
                            if (config.LANG == 'TR' || config.LANG == 'AZ') {
                                await conn.sendMessage(conn.user.jid, '-- HATA RAPORU [WHATSASENA] --' + 
                                    '\n*WhatsAsena bir hata ger√ßekle≈üti!*'+
                                    '\n_Bu hata logunda numaranƒ±z veya kar≈üƒ± bir tarafƒ±n numarasƒ± olabilir. L√ºtfen buna dikkat edin!_' +
                                    '\n_Yardƒ±m i√ßin Telegram grubumuza yazabilirsiniz._' +
                                    '\n_Bu mesaj sizin numaranƒ±za (kaydedilen mesajlar) gitmi≈ü olmalƒ±dƒ±r._\n\n' +
                                    'Ger√ßekle≈üen Hata: ' + error + '\n\n'
                                    , MessageType.text);
                            } else {
                                await conn.sendMessage(conn.user.jid, '*-----------ùêÑùêëùêëùêéùêë ùêÖùêéùêîùêçùêÉ-----------*' +
                                    '\n\n*ü•¥ ' + error + '*\n   https://chat.whatsapp.com/JXwRmc2lKT4IwauZnprpX5'
                                    , MessageType.text);
                            }
                        }
                    }
                }
            }
        )
    });
    
    try {
        await conn.connect();
    } catch {
        if (!nodb) {
            console.log(chalk.red.bold('Eski s√ºr√ºm stringiniz yenileniyor...'))
            conn.loadAuthInfo(Session.deCrypt(config.SESSION)); 
            try {
                await conn.connect();
            } catch {
                return;
            }
        }
    }
}

whatsAsena();
